<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Wejście gamepada</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Reference section for Gamepad Input" />
  <meta name="rh-index-keywords" content="gp_face1,gp_face2,gp_face3,gp_face4,gp_shoulderl,gp_shoulderlb,gp_shoulderr,gp_shoulderrb,gp_select,gp_start,gp_stickl,gp_stickr,gp_padu,gp_padd,gp_padl,gp_padr,gp_axislh,gp_axislv,gp_axisrh,gp_axisrv,gp_axis_acceleration_x,gp_axis_acceleration_y,gp_axis_acceleration_z,gp_axis_angular_velocity_x,gp_axis_angular_velocity_y,gp_axis_angular_velocity_z,gp_axis_orientation_x,gp_axis_orientation_y,gp_axis_orientation_z,gp_axis_orientation_w" />
  <meta name="search-keywords" content="Gamepad Input,gamepads,gp_face1,gp_face2,gp_face3,gp_face4,gp_shoulderl,gp_shoulderlb,gp_shoulderr,gp_shoulderrb,gp_select,gp_start,gp_stickl,gp_stickr,gp_padu,gp_padd,gp_padl,gp_padr,gp_axislh,gp_axislv,gp_axisrh,gp_axisrv,gp_axis_acceleration_x,gp_axis_acceleration_y,gp_axis_acceleration_z,gp_axis_angular_velocity_x,gp_axis_angular_velocity_y,gp_axis_angular_velocity_z,gp_axis_orientation_x,gp_axis_orientation_y,gp_axis_orientation_z,gp_axis_orientation_w" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Wejście gamepada</h1>
  <p><b></b><span data-keyref="GameMaker Name">GameMaker</span> ma kilka specjalnych funkcji, które można wykorzystać do wykrywania analogowych i cyfrowych elementów sterujących z wielu podłączonych gamepadów. Funkcje te działają podobnie jak <a href="../Device_Input/Device_Input.htm">wejścia urządzeń</a>, ponieważ można wykryć do czterech różnych podłączonych gamepadów XInput (oraz do 8 gamepadów DirectInput) i obsługiwać wejścia z każdego z nich za pomocą tych samych funkcji. Należy pamiętać, że gdy gamepad jest podłączany do urządzenia (lub odłączany), wyzwalane jest asynchroniczne <a href="../../../../The_Asset_Editors/Object_Properties/Async_Events.htm">zdarzenie systemowe</a>, w którym można zastosować odpowiednie funkcje.</p>
  <p>Gniazda&quot; dla gamepadów są indeksowane od 0 w górę, a to, które gniazdo zostanie przypisane do danego gamepada, zależy od wielu czynników, między innymi od systemu operacyjnego, na którym działa projekt. W systemie docelowym <strong>Windows</strong>, sloty 0 - 3 włącznie są przeznaczone <i>tylko dla gamepadów Xinput</i>, czyli kontrolerów Xbox360 i ich odpowiedników. Można jednak również sprawdzić gniazda 4 - 11 włącznie dla gamepadów <i>DirectInput</i>, co oznacza, że można wykryć wiele innych modeli kontrolerów podłączonych przez te gniazda. Na innych platformach pady mogą być wykrywane w <em>dowolnym</em> slocie, który został przypisany przez system operacyjny - może to być slot 3, 20 lub więcej. Przykładowo, urządzenia z systemem <strong>Android</strong> zapisują gamepady bluetooth w slocie, a następnie rezerwują ten slot dla danego gamepada w przyszłości, niezależnie od tego, czy jest on podłączony, czy nie, więc nie <em>można</em> zakładać, że pojedynczy podłączony gamepad jest podłączony do slotu 0, gdyż prawdopodobnie tak nie będzie.</p>
  <p>Warto zauważyć, że w przypadku korzystania z gamepadów DirectInput na <span class="notranslate">Windows</span> lub gamepadów ogólnych na innych platformach, stałe podane poniżej <strong>mogą nie odpowiadać dokładnie przyciskom, których można się spodziewać po ich naciśnięciu</strong>, ze względu na fragmentaryczny i niestandardowy sposób implementacji API przez producentów kontrolerów. Z tego powodu zaleca się wprowadzenie w grach jakiegoś ekranu ustawień gamepada, na którym można przedefiniować przyciski gamepada na podstawie danych wejściowych z dowolnego podłączonego urządzenia, aby uniknąć problemów (funkcje &quot;mapowania&quot; gamepada mogą w tym pomóc na stronach <span class="notranslate">Windows</span> Desktop, <span class="notranslate">Ubuntu</span>, <span class="notranslate">macOS</span> i <span class="notranslate">Android</span>, natomiast na wszystkich innych trzeba to zrobić samodzielnie za pomocą kodu).</p>
  <h2>Stałe wejściowe</h2>
  <p>Podczas pracy z funkcjami gamepada dane wejściowe mogą pochodzić z <strong>osi</strong>, <strong>przycisków</strong> lub <strong>kapeluszy</strong>, które <span data-keyref="GameMaker Name">GameMaker</span> przypisze do następujących wbudowanych stałych (należy pamiętać, że &quot;kapelusze&quot; są zwykle wykrywane tylko w niestandardowych kontrolerach):</p>
  <table>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Gamepad_Button"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_axis_value.htm">Przycisk gamepada Stała</a></span></th>
      </tr>
      <tr>
        <th>Stała</th>
        <th>Opis</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face1</span></td>
        <td>Górny przycisk 1 (odpowiada <i> literze &quot;A&quot;</i> na kontrolerze Xbox 360 i <i>krzyżykowi</i> na kontrolerze PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face2</span></td>
        <td>Górny przycisk 2 (odpowiada <i> literze &quot;B&quot;</i> na kontrolerze Xbox 360 i <i>kółku</i> na kontrolerze PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face3</span></td>
        <td>Górny przycisk 3 (odpowiada symbolowi <i>&quot;X&quot;</i> na kontrolerze Xbox 360 i <i>kwadratowi</i> na kontrolerze PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face4</span></td>
        <td>Górny przycisk 4 (odpowiada literze <i>&quot;Y&quot;</i> na kontrolerze Xbox 360 i <i>trójkątowi</i> na kontrolerze PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderl</span></td>
        <td>Przycisk na lewym ramieniu</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderlb</span></td>
        <td>Spust lewego ramienia</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderr</span></td>
        <td>Przycisk prawego ramienia</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderrb</span></td>
        <td>Spust prawego ramienia</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_select</span></td>
        <td>Przycisk wyboru (na kontrolerze DS4 uruchamia się on po naciśnięciu touchpada)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_start</span></td>
        <td>Przycisk uruchamiania (jest to przycisk &quot;Opcje&quot; na kontrolerze PS4)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_stickl</span></td>
        <td>Wciśnięty lewy drążek (jako przycisk)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_stickr</span></td>
        <td>Wciśnięty prawy drążek (jako przycisk)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padu</span></td>
        <td>D-pad w górę</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padd</span></td>
        <td>D-pad w dół</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padl</span></td>
        <td>D-pad w lewo</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padr</span></td>
        <td>D-pad w prawo</td>
      </tr>
    </tbody>
  </table>
  <table>
    <colgroup>
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Gamepad_Axis"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_axis_value.htm">Stała osi gamepada</a></span></th>
      </tr>
      <tr>
        <th>Stała</th>
        <th>Opis</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axislh</span></td>
        <td>Oś pozioma lewego drążka (analogowa)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axislv</span></td>
        <td>Oś pionowa lewego drążka (analogowa)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axisrh</span></td>
        <td>Oś pozioma prawego drążka (analogowa)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axisrv</span></td>
        <td>Oś pionowa prawego drążka (analogowa)</td>
      </tr>
      <tr>
        <th colspan="2">Poniższe stałe mogą być używane tylko z gamepadem DualSense na PS4 lub PS5</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_acceleration_x</span>*</td>
        <td>Przyspieszenie gamepada na osi X</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_acceleration_y</span>*</td>
        <td>Przyspieszenie gamepada na osi Y</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_acceleration_z</span>*</td>
        <td>Przyspieszenie gamepada na osi Z</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_angular_velocity_x</span>*</td>
        <td>Prędkość kątowa gamepada na osi X</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_angular_velocity_y</span>*</td>
        <td>Prędkość kątowa gamepada na osi Y</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_angular_velocity_z</span>*</td>
        <td>Prędkość kątowa gamepada na osi Z</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_x</span>*</td>
        <td>Orientacja X gamepada</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_y</span>*</td>
        <td>Orientacja Y gamepada</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_z</span>*</td>
        <td>Orientacja Z gamepada</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_w</span>*</td>
        <td>Orientacja W gamepada</td>
      </tr>
    </tbody>
  </table>
  <p class="note"><span class="note">UWAGA</span> <strong>Orientacja</strong> gamepada to <a href="https://en.wikipedia.org/wiki/Quaternion" title="Quaternion">kwaternion</a>, dlatego ma on cztery wartości (X, Y, Z i W).<br>
    <br>
    * Te stałe są obsługiwane tylko na konsolach PS4 i PS5, a w przypadku użycia ich na innych platformach funkcje wejściowe zwrócą wartość <span class="inline">0</span>, nawet jeśli używany jest gamepad DualSense.
  </p>
  <p>Aby lepiej zrozumieć, jaką dokładnie część kontrolera reprezentuje każda stała, można zapoznać się z poniższym obrazem standardowego gamepada XInput:</p>
  <p><img alt="Xinput gamepad illustration" class="center" src="../../../../assets/Images/Scripting_Reference/GML/Reference/Game_Input/GamePad.png" /></p>
  <h2>Funkcje</h2>
  <p>Poniżej znajduje się lista wszystkich funkcji gamepada:</p>
  <ul class="colour">
    <li><a href="gamepad_is_supported.htm"><span class="notranslate">gamepad_is_supported</span></a></li>
    <li><a href="gamepad_is_connected.htm"><span class="notranslate">gamepad_is_connected</span></a></li>
    <li><a href="gamepad_get_guid.htm"><span class="notranslate">gamepad_get_guid</span></a></li>
    <li><a href="gamepad_get_device_count.htm"><span class="notranslate">gamepad_get_device_count</span></a></li>
    <li><a href="gamepad_get_description.htm"><span class="notranslate">gamepad_get_description</span></a></li>
    <li><a href="gamepad_get_button_threshold.htm"><span class="notranslate">gamepad_get_button_threshold</span></a></li>
    <li><a href="gamepad_get_axis_deadzone.htm"><span class="notranslate">gamepad_get_axis_deadzone</span></a></li>
    <li><a href="gamepad_get_option.htm"><span class="notranslate">gamepad_get_option</span></a></li>
    <li><a href="gamepad_set_button_threshold.htm"><span class="notranslate">gamepad_set_button_threshold</span></a></li>
    <li><a href="gamepad_set_axis_deadzone.htm"><span class="notranslate">gamepad_set_axis_deadzone</span></a></li>
    <li><a href="gamepad_set_vibration.htm"><span class="notranslate">gamepad_set_vibration</span></a></li>
    <li><a href="gamepad_set_colour.htm"><span class="notranslate">gamepad_set_colour</span></a></li>
    <li><a href="gamepad_set_option.htm"><span class="notranslate">gamepad_set_option</span></a></li>
    <li><a href="gamepad_axis_count.htm"><span class="notranslate">gamepad_axis_count</span></a></li>
    <li><a href="gamepad_axis_value.htm"><span class="notranslate">gamepad_axis_value</span></a></li>
    <li><a href="gamepad_button_check.htm"><span class="notranslate">gamepad_button_check</span></a></li>
    <li><a href="gamepad_button_check_pressed.htm"><span class="notranslate">gamepad_button_check_pressed</span></a></li>
    <li><a href="gamepad_button_check_released.htm"><span class="notranslate">gamepad_button_check_released</span></a></li>
    <li><a href="gamepad_button_count.htm"><span class="notranslate">gamepad_button_count</span></a></li>
    <li><a href="gamepad_button_value.htm"><span class="notranslate">gamepad_button_value</span></a></li>
    <li><a href="gamepad_hat_count.htm"><span class="notranslate">gamepad_hat_count</span></a></li>
    <li><a href="gamepad_hat_value.htm"><span class="notranslate">gamepad_hat_value</span></a></li>
  </ul>
  <p> </p>
  <p>Istnieją również następujące funkcje gamepada, które służą do przemapowania wbudowanych stałych na bezpośrednie wejścia fizyczne danego gamepada. Funkcje te są przeznaczone tylko dla platform docelowych <span class="notranslate">Windows</span> Desktop, <span class="notranslate">Ubuntu</span>, <span class="notranslate">macOS</span>, i <span class="notranslate">Android</span>, a na <span class="notranslate">Windows</span> będą działać tylko dla urządzeń z wejściem bezpośrednim. W programie <span data-keyref="GameMaker Name">GameMaker</span> dostępne są mapowania dla wielu różnych gamepadów oparte na <a href="https://github.com/gabomdq/SDL_GameControllerDB" target="_blank">SDL Gamepad Controller DB</a>, jednak ze względu na ogromną liczbę typów i marek kontrolerów nie jest możliwe mapowanie stałych <span class="notranslate">GML</span> do właściwych wejść dla każdej marki i modelu, dlatego dzięki tym funkcjom masz możliwość tworzenia własnych mapowań.</p>
  <ul class="colour">
    <li><a href="gamepad_get_mapping.htm"><span class="notranslate">gamepad_get_mapping</span></a></li>
    <li><a href="gamepad_test_mapping.htm"><span class="notranslate">gamepad_test_mapping</span></a></li>
    <li><a href="gamepad_remove_mapping.htm"><span class="notranslate">gamepad_remove_mapping</span></a></li>
  </ul>
  <p> </p>
  <p>Warto zauważyć, że kontrolery bezpośredniego wejścia działają w <i>trybie kooperacji</i>, co oznacza, że gra ma do nich dostęp tylko wtedy, gdy jest aplikacją pierwszoplanową, a to z kolei powoduje, że kontrolery bezpośredniego wejścia są &quot;gubione&quot;, gdy gra traci ostrość, a następnie &quot;znajdowane&quot; ponownie, gdy gra odzyska ostrość (można to wykryć w zdarzeniu systemowym i zająć się tym). Podobnie, żadne dane wejściowe z gamepadów nie będą wykrywane, gdy gra nie jest w centrum uwagi, dlatego zalecamy używanie funkcji <a href="../../OS_And_Compiler/os_is_paused.htm"><span class="inline">os_is_paused()</span></a> lub <a href="../../Cameras_And_Display/The_Game_Window/window_has_focus.htm"><span class="inline">window_has_focus()</span></a> do wykrywania tego faktu i wstrzymywania gry lub czegoś podobnego, ponieważ każdy przycisk przytrzymany w momencie, gdy gra traci ostrość, zachowa stan przytrzymania do momentu, gdy gra odzyska ostrość.</p>
  <h2>Zgodność</h2>
  <p>Poniższa lista przedstawia aktualną kompatybilność między platformami (należy pamiętać, że będzie się ona zmieniać wraz z kolejnymi aktualizacjami):</p>
  <ul class="colour">
    <li>System<strong>Windows </strong>jest w pełni obsługiwany, przy czym jednocześnie można podłączyć maksymalnie 12 urządzeń (o numerach od 0 do 11, gdzie 0 - 3 to urządzenia XInput, a 4 - 11 to DirectInput). Dozwolone jest także ponowne mapowanie stałych kontrolera.</li>
    <li>System<strong>macOS </strong>jest obsługiwany przez maksymalnie 4 podłączone urządzenia jednocześnie, przy czym urządzenia te mogą być TYLKO typu Playstation3 lub Xbox 360. Należy pamiętać, że aby obsługa padów działała, opcja &quot;Build for Mac AppStore&quot; w Mac Game Options musi być WYŁĄCZONA. Dozwolone jest także ponowne mapowanie stałych kontrolera.</li>
    <li><strong>Ubuntu </strong>obsługuje również wejście Gamepada, ale może być konieczne zainstalowanie dodatkowych bibliotek z repozytorium <span class="notranslate">Ubuntu</span>. Można to zrobić w prosty sposób, otwierając terminal wiersza poleceń i wpisując poniższe polecenie (spowoduje to zainstalowanie obsługi GUI dla joysticka/gamepada, jak również samego API joysticka/gamepada - remapowanie stałych kontrolera jest <i>niedozwolone</i> ):
     <p class="code">sudo apt-get install jstest-gtk<br />
        sudo apt-get install joystick.</p>
    </li>
    <li>Gry<strong>HTML5 </strong>wykorzystujące gamepady są obsługiwane przez większość głównych przeglądarek, z wyjątkiem <i>Safari</i>. Ponowne mapowanie stałych kontrolera jest <i>niedozwolone</i>.</li>
    <li>Przeglądarki internetowe wykrywają gamepady dopiero po naciśnięciu przycisku lub przesunięciu osi, więc mogą one nie być dostępne od razu po rozpoczęciu gry. Dotyczy to platform docelowych <strong>Opera GX</strong> i <strong>HTML </strong>.</li>
    <li>Obsługa gamepadów w systemie <strong>iOS </strong>obejmuje także szafkę iCade. Lewa oś odwzorowuje kontroler drążka (choć wejście jest cyfrowe, a nie analogowe), cztery przyciski &quot;twarzowe&quot; odwzorowują przyciski z przodu obudowy, a cztery przyciski na ramionach odwzorowują przyciski z tyłu obudowy.</li>
    <li>Eksport na<strong>Androida </strong>(i <strong>Amazon Fire</strong>) obsługuje kontrolery NYKO i generyczne kontrolery Bluetooth, ale tylko wtedy, gdy są one włączone, co oznacza, że musisz zaznaczyć opcję iCade/Bluetooth w sekcji <a href="../../../../Settings/Game_Options/Android.htm">Ogólne</a> w Opcjach Gry na stronie <span class="notranslate">Android</span>. Do pełnego działania wymagają one API na poziomie 12 i należy zauważyć, że <span data-keyref="GameMaker Name">GameMaker</span> zarejestruje jako podłączone każde urządzenie Bluetooth, z którym sparowane jest Twoje urządzenie, niezależnie od tego, czy jest ono faktycznie podłączone, czy nie. Dlatego należy wziąć to pod uwagę podczas przypisywania i sprawdzania &quot;slotów&quot;. Należy zauważyć, że dozwolone jest także remapowanie stałych kontrolera.</li>
    <li>Na <strong>PS4</strong>, jeśli chcesz korzystać z funkcji śledzenia ruchu na panelu dotykowym, musisz użyć przycisków <a href="../Device_Input/Device_Input.htm"><span class="inline">device_mouse_*</span></a> przycisków. Ponowne mapowanie stałych kontrolera jest <i>niedozwolone</i>.</li>
    <li>W systemach <strong>Windows </strong><strong>UWP</strong>, <strong>XBoxOne </strong>i <strong>Nintendo Switch</strong> gamepady są w pełni obsługiwane, ale <i>nie</i> jest dozwolone remapowanie stałych kontrolera.</li>
  </ul>
  <p>Najlepiej byłoby, gdyby na <i>wszystkich</i> platformach docelowych wyliczyć listę dostępnych &quot;gniazd&quot; dla gamepadów, a następnie sprawdzić, czy wykryto jakieś urządzenia, czyli coś takiego:</p>
  <p class="code">var _maxpads = gamepad_get_device_count();<br />
    <br />
    for (var i = 0; i &lt; _maxpads; i++)<br />
    {<br />
        if (gamepad_is_connected(i))<br />
        {<br />
            // do stuff with pad &quot;i&quot;<br />
        }<br />
    }
  </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Powrót: <a href="../Game_Input.htm">Wejście do gry</a></div>
        <div style="float:right">Następny: <a href="../Virtual_Keys_And_Keyboards/Virtual_Keys_And_Keyboards.htm">Klawisze wirtualne i klawiatury wirtualne</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Wszystkie prawa zastrzeżone.</span></h5>
  </div>
  <!-- KEYWORDS
Gamepad Input Functions
gp_face1
gp_face2
gp_face3
gp_face4
gp_shoulderl
gp_shoulderlb
gp_shoulderr
gp_shoulderrb
gp_select
gp_start
gp_stickl
gp_stickr
gp_padu
gp_padd
gp_padl
gp_padr
gp_axislh
gp_axislv
gp_axisrh
gp_axisrv
gp_axis_acceleration_x
gp_axis_acceleration_y
gp_axis_acceleration_z
gp_axis_angular_velocity_x
gp_axis_angular_velocity_y
gp_axis_angular_velocity_z
gp_axis_orientation_x
gp_axis_orientation_y
gp_axis_orientation_z
gp_axis_orientation_w
-->
  <!-- TAGS
gamepad_functions
-->
</body>
</html>