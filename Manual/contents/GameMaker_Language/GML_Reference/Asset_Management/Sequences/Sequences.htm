<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Sekwencje</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page outlining the different functions and variables associated with Sequences" />
  <meta name="rh-index-keywords" content="" />
  <meta name="search-keywords" content="Sequences" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Sekwencje</h1>
  <p>Sekwencje są zwykle tworzone w witrynie <span class="notranslate">IDE</span> za pomocą <a href="../../../../The_Asset_Editors/Sequences.htm">edytora</a> sekwencji, ale można je także tworzyć i edytować za pomocą kodu. Jednak przed zapoznaniem się z dostępnymi funkcjami należy zrozumieć sposób definiowania adresu <span class="notranslate">sequences</span> w witrynie <span class="notranslate">GameMaker</span> oraz różne terminy, które będą używane.</p>
  <p>Na początek, na najwyższym poziomie, znajduje się <b>element sekwencji</b>. Jest to element, który umieszcza się na warstwie w witrynie <span class="notranslate">room</span>, za pomocą edytora <span class="notranslate">Room</span> lub w kodzie przy użyciu odpowiednich <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">funkcji</a> warstwy. Element warstwy nie ma żadnych rzeczywistych właściwości poza wartością identyfikatora elementu, ale ten identyfikator jest wymagany do korzystania z wyżej wymienionych funkcji warstwy w celu zmiany odtwarzania <span class="notranslate">sequence</span> lub uzyskania dostępu do danych <span class="notranslate">sequence</span>.</p>
  <p>Następnie mamy <b>obiekty sekwencji</b> i instancje <b>sekwencji</b>, podobnie jak w przypadku <b>obiektów</b> ogólnych <span class="notranslate">objects</span> i instancji. <i>Obiekt</i> <span class="notranslate">sequence</span> to zasób podstawowy, który został utworzony w <b>przeglądarce</b> zasobów lub przy użyciu funkcji <a href="sequence_create.htm"><span class="inline">sequence_create()</span></a>a <i>instancja</i> <span class="notranslate">sequence</span> to &quot;kopia&quot; tego <span class="notranslate">sequence</span> <span class="notranslate">object</span>, która została umieszczona w <span class="notranslate">room</span> jako element na warstwie. Pomyśl o <span class="notranslate">sequence</span> <span class="notranslate">objects</span> jak o projekcie, a o instancjach <span class="notranslate">sequence</span> jak o tworzeniu na podstawie tego projektu. <span class="notranslate">Sequence</span> <span class="notranslate">objects</span> i instancje są <a href="../../../GML_Overview/Structs.htm">strukturami</a> i - w przeciwieństwie do zwykłego <span class="notranslate">objects</span> - instancję <span class="notranslate">sequence</span> <span class="notranslate">object</span> <span class="notranslate">struct</span> można edytować pod adresem <span class="notranslate">runtime</span>, co wpłynie na wszystkie kolejne instancje tego <span class="notranslate">sequence</span>, gdy utworzysz je jako elementy (a wszelkie edycje wykonane na <span class="notranslate">sequence</span> <span class="notranslate">object</span> <b>nie</b> zostaną zresetowane przez ponowne uruchomienie gry lub <span class="notranslate">room</span> za pomocą funkcji <span class="inline">room_restart()</span> lub <span class="inline">game_restart()</span> ). Instancja <span class="notranslate">sequence</span> <span class="notranslate">struct</span> zawiera kilka parametrów do sterowania odtwarzaniem i innymi rzeczami (wyjaśniono to bardziej szczegółowo poniżej), a także <b>dane sekwencji</b> <span class="notranslate">struct</span>.</p>
  <p>Wreszcie, jak już wspomniano, dostępne są <b>dane sekwencji</b>, czyli kolejny adres <span class="notranslate">struct</span>. Ten adres <span class="notranslate">struct</span> zawiera <i>wszystkie</i> dane dotyczące <span class="notranslate">sequence</span>. Zawiera on ścieżki, właściwości tych ścieżek, prędkość odtwarzania i wiele innych informacji. Dokładny opis zawartości strony <span class="notranslate">structs</span> znajduje się poniżej, ale zasadniczo składa się ona ze <b>ścieżki zasobów</b> <span class="notranslate">structs</span> oraz <b>ścieżki parametrów</b> <span class="notranslate">structs</span>, które wykorzystują <b>dane klatek kluczowych</b> do wykonywania akcji podczas odtwarzania strony <span class="notranslate">sequence</span>.</p>
  <p>Z elementami sekwencji mamy do czynienia za pomocą <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">funkcji warstwy</a> <span class="notranslate">room</span>, natomiast dla <span class="notranslate">sequence</span> <span class="notranslate">objects</span>, instancji i danych mamy następujące funkcje:</p>
  <p> </p>
  <ul class="colour">
    <li><a href="sequence_exists.htm"><span class="notranslate">sequence_exists</span></a></li>
    <li><a href="sequence_create.htm"><span class="notranslate">sequence_create</span></a></li>
    <li><a href="sequence_destroy.htm"><span class="notranslate">sequence_destroy</span></a></li>
    <li><a href="sequence_get.htm"><span class="notranslate">sequence_get</span></a></li>
    <li><a href="sequence_track_new.htm"><span class="notranslate">sequence_track_new</span></a></li>
    <li><a href="sequence_keyframe_new.htm"><span class="notranslate">sequence_keyframe_new</span></a></li>
    <li><a href="sequence_keyframedata_new.htm"><span class="notranslate">sequence_keyframedata_new</span></a></li>
    <li><a href="sequence_get_objects.htm"><span class="notranslate">sequence_get_objects</span></a></li>
    <li><a href="sequence_instance_override_object.htm"><span class="notranslate">sequence_instance_override_object</span></a></li>
  </ul>
  <p> </p>
  <p>Z instancjami jest także związana <strong>wbudowana zmienna</strong>, której można użyć do określenia, czy dana instancja została użyta w witrynie <span class="notranslate">sequence</span>, czy nie:</p>
  <p> </p>
  <ul class="colour">
    <li><a href="in_sequence.htm"><span class="notranslate">in_sequence</span></a></li>
  </ul>
  <p class="note"><strong>WAŻNE!</strong> Jeśli na stronie <span class="notranslate">sequence</span> znajdują się jakieś instancje, nie powinny one zmieniać swoich zmiennych <span class="inline"><span style="font-size:14px;">image_xscale</span> / <span class="inline"><span style="font-size:14px;">image_yscale</span> / <span class="inline"><span style="font-size:14px;">image_angle</span> / <span class="inline"><span style="font-size:14px;">x</span> / <span class="inline"><span style="font-size:14px;">y</span>, ponieważ zostaną one nadpisane, gdy strona <span class="notranslate">sequence</span> będzie aktualizować każdy krok po rozpoczęciu odtwarzania.</p>
  <p> </p>
  <p>Przed użyciem tych funkcji do tworzenia lub edycji <span class="notranslate">sequences</span>, zalecamy zapoznanie się ze szczegółowymi opisami właściwości <span class="notranslate">struct</span> podanymi poniżej. Ogólny zarys tworzenia nowej strony <span class="notranslate">sequence</span> wygląda następująco:</p>
  <ul class="colour">
    <li>Utwórz nową stronę <span class="notranslate">sequence</span> <span class="notranslate">object</span> za pomocą funkcji <span class="inline"><a href="sequence_create.htm">sequence_create()</a></span> i zapisz indeks <span class="notranslate">sequence</span> <span class="notranslate">object</span> w zmiennej. Indeks ten umożliwia dostęp do strony <span class="notranslate">sequence</span> <span class="notranslate">object</span> <span class="notranslate">struct</span> .</li>
  </ul>
  <p class="code">myseq = sequence_create();</p>
  <ul class="colour">
    <li>Ustaw wartości najwyższego poziomu w serwisie <span class="notranslate">sequence</span> <span class="notranslate">object</span>, takie jak długość, tryb odtwarzania, szybkość odtwarzania itd. Na przykład:</li>
  </ul>
  <p class="code">myseq.length = 120;<br />
    myseq.loopmode = seqplay_pingpong</p>
  <ul class="colour">
    <li>Przed dodaniem ścieżek do <span class="notranslate">sequence</span> <span class="notranslate">object</span> należy je utworzyć, dlatego teraz należy utworzyć tablicę ścieżek <i>zasobów</i>, które zostały zdefiniowane za pomocą funkcji <a href="sequence_track_new.htm"><span class="inline">sequence_track_new()</span></a>. Zauważ, że w kodzie nie ma różnicy między ścieżkami <span class="notranslate">asset</span> a ścieżkami parametrów - wszystkie są po prostu ścieżkami, a ich zachowanie zależy od rodzaju utworzonej ścieżki i od tego, czy są przypisane jako podścieżki do ścieżki nadrzędnej, czy nie. Tak więc można utworzyć ścieżkę dla <span class="notranslate">asset</span>, a następnie przypisać do niej podścieżki dla różnych parametrów i te podścieżki będą działać jako ścieżki <i>parametrów</i> dla <span class="notranslate">asset</span>. Poniższy przykład tworzy pojedynczą ścieżkę grafiki <span class="notranslate">asset</span>, która zostanie później dodana do <span class="notranslate">sequence</span>:</li>
  </ul>
  <p class="code">var mytracks = array_create(1);<br />
    mytracks[0] = sequence_track_new(seqtracktype_graphic);</p>
  <ul class="colour">
    <li>Każda ścieżka <span class="notranslate">asset</span> musi zawierać pewne dane, które powiedzą stronie <span class="notranslate">sequence</span>, jak będzie wyglądać, jakie będzie jej położenie itd. i są one dodawane w postaci klatek <i>kluczowych</i>. Na najwyższym poziomie dla ścieżki <span class="notranslate">asset</span> można ustawić <span class="notranslate">keyframes</span> dla różnych rzeczy (wymienionych w sekcji Ścieżka <span class="notranslate">Struct</span> poniżej), ale należy pamiętać, że ponieważ są to ścieżki <span class="notranslate">asset</span> <span class="notranslate">keyframes</span> , nie będą one interpolowane i po prostu zmienią wartość, do której się odnoszą, po osiągnięciu danej klatki. Każda strona <span class="notranslate">keyframe</span> to strona <span class="notranslate">struct</span>, która jest dodawana do tablicy, a następnie ta tablica jest przypisywana do ścieżki <span class="notranslate">asset</span>. Aby utworzyć stronę <span class="notranslate">keyframe</span> <span class="notranslate">struct</span>, należy wywołać funkcję <a href="sequence_keyframe_new.htm"><span class="inline">sequence_keyframe_new()</span></a> a aby wypełnić stronę <span class="notranslate">keyframe</span> wymaganymi danymi, użyjemy funkcji <a href="sequence_keyframedata_new.htm"><span class="inline">sequence_keyframedata_new()</span></a>:</li>
  </ul>
  <p class="code">// Create a new keyframe struct for a graphics asset track and add it to an array (as you can have multiple keys in a frame)<br />
    var graphickeys = array_create(1);<br />
    graphickeys[0] = sequence_keyframe_new(seqtracktype_graphic);<br />
    // Set the graphics keyframe top level data for the keyframe position and length, etc...<br />
    graphickeys[0].frame = 0;<br />
    graphickeys[0].length = 1;<br />
    graphickeys[0].stretch = true;<br />
    graphickeys[0].disabled = false;<br />
    // Create the channel data that will go into this keyframe (again an array, as each key can have multiple channels of keyframe data)<br />
    var graphickeydata = array_create(1);<br />
    graphickeydata[0] = sequence_keyframedata_new(seqtracktype_graphic);<br />
    graphickeydata[0].spriteIndex = spr_Platform;<br />
    graphickeydata[0].channel = 0;<br />
    // Add the keyframe data channels to the graphics track keyframe<br />
    graphickeys[0].channels = graphickeydata;<br />
    // Add the definied keyframes to the track<br />
    mytracks[0].name = &quot;TestGraphicTrack&quot;;<br />
    mytracks[0].keyframes = graphickeys;</p>
  <ul class="colour">
    <li>Teraz musimy utworzyć ścieżkę parametrów, którą przypiszemy jako podścieżkę do ścieżki grafiki, którą właśnie utworzyliśmy. Należy to zrobić w podobny sposób, jak pokazano powyżej, z tą różnicą, że teraz musimy nadać ścieżce nazwę, która wskaże jej przeznaczenie, w tym przypadku &quot;pozycja&quot;, ponieważ będziemy używać tej ścieżki do przesuwania ścieżki graficznej w czasie trwania klatek animacji <span class="notranslate">sequence</span>:</li>
  </ul>
  <p class="code">// Create a new parameter track struct for the position of the graphic<br />
    var paramtracks = array_create(1);<br />
    paramtracks[0] = sequence_track_new(seqtracktype_real);<br />
    paramtracks[0].name = &quot;position&quot;;<br />
    paramtracks[0].interpolation = true;<br />
    // Create the keyframe struct to hold the parameter channel data and set the frame position for the keyframe<br />
    var paramkeys = array_create(2);<br />
    paramkeys[0] = sequence_keyframe_new(seqtracktype_real);<br />
    paramkeys[0].frame = 0;<br />
    paramkeys[1] = sequence_keyframe_new(seqtracktype_real);<br />
    paramkeys[1].frame = 120;<br />
    // Create the keyframe data structs<br />
    var paramkeydata1 = array_create(2);<br />
    paramkeydata1[0] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata1[0].channel = 0; // Channel 0 for a position track is the X position<br />
    paramkeydata1[0].value = 0;<br />
    paramkeydata1[1] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata1[1].channel = 1; // Channel 1 for a position track is the Y position<br />
    paramkeydata1[1].value = 0;<br />
    var paramkeydata2 = array_create(2);<br />
    paramkeydata2[0] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata2[0].channel = 0;<br />
    paramkeydata2[0].value = room_width;<br />
    paramkeydata2[1] = sequence_keyframedata_new(seqtracktype_real);<br />
    paramkeydata2[1].channel = 1;<br />
    paramkeydata2[1].value = room_height;<br />
    // Assign the keyframe data structs to the channels for each key<br />
    paramkeys[0].channels = paramkeydata1;<br />
    paramkeys[1].channels = paramkeydata2;<br />
    // Assign the keys to the parameter track<br />
    paramtracks[0].keyframes = paramkeys;</p>
  <ul class="colour">
    <li>Po wykonaniu tych czynności należy przypisać ścieżkę parametrów jako podścieżkę do naszej głównej ścieżki grafiki <span class="notranslate">asset</span>, którą utworzyliśmy na początku, a następnie przypisać te ścieżki do strony <span class="notranslate">sequence</span>, której instancję możemy następnie utworzyć w pomieszczeniu:</li>
  </ul>
  <p class="code">mytracks[0].tracks = paramtracks;<br />
    myseq.tracks = mytracks;<br />
    layer_sequence_create(&quot;Assets_1&quot;, 0, 0, myseq);</p>
  <p>Powyższe instrukcje tworzą bardzo prostą stronę <span class="notranslate">sequence</span> <span class="notranslate">object</span>, która rysuje stronę <span class="notranslate">sprite</span> na pozycji (0, 0) <i>sekwencji</i>, a następnie przesuwa ją do prawego dolnego rogu i z powrotem w ramach strony <span class="notranslate">loop</span>. Jak już wspomniano, istnieje wiele miejsc, w których trzeba uzyskać dostęp do różnych stron <span class="notranslate">structs</span>, aby przekazać lub uzyskać dane na temat strony <span class="notranslate">sequence</span>, a w poniższych sekcjach wymieniono wszystkie różne właściwości, które zawierają te strony <span class="notranslate">structs</span>:</p>
  <ul class="colour">
    <li><a name="object"></a><a href="Sequence_Structs/The_Sequence_Object_Struct.htm"><label for="1"> <span class="notranslate">Sequence</span> <span class="notranslate">Object</span> Struktura</label></a></li>
    <li><a name="instance"></a><a href="Sequence_Structs/The_Sequence_Instance_Struct.htm"><label for="2">Struktura instancji <span class="notranslate">Sequence</span> </label></a></li>
    <li><a name="track"></a><a href="Sequence_Structs/The_Track_Struct.htm"><label for="3">Struktura toru</label></a></li>
    <li><a name="keyframe"></a><a href="Sequence_Structs/The_Keyframe_Struct.htm"><label for="4"> <span class="notranslate">Keyframe</span> Struktura</label></a></li>
    <li><a name="keyframe_data"></a><a href="Sequence_Structs/The_Keyframe_Data_Struct.htm"><label for="5">Struktura danych <span class="notranslate">Keyframe</span> </label></a></li>
  </ul>
  <p> </p>
  <p>Ponadto do strony <span class="notranslate">sequences</span> można dodawać kod, który może być wyzwalany jako <strong>zdarzenie</strong> w danej <strong>chwili</strong> lub jako <strong>wiadomość</strong> rozgłoszeniowa. Dokładne wyjaśnienie tego zagadnienia znajduje się na następnej stronie:</p>
  <ul class="colour">
    <li><a href="Sequence_Events_Moments_Broadcast.htm">Wydarzenia, momenty i komunikaty nadawane</a></li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Powrót: <a href="../Asset_Management.htm">Zarządzanie aktywami</a></div>
        <div style="float:right">Następny: <a href="../Fonts/Fonts.htm">Czcionki</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Wszystkie prawa zastrzeżone.</span></h5>
  </div>
  <!-- KEYWORDS
Sequences
-->
  <!-- TAGS
sequence_functions
-->
</body>
</html>