<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>vertex_format_add_custom</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Reference for vertex_format_add_custom" />
  <meta name="rh-index-keywords" content="vertex_format_add_custom,vertex_type_float1,vertex_type_float2,vertex_type_float3,vertex_type_float4,vertex_type_colour,vertex_type_ubyte4,vertex_usage_position,vertex_usage_colour,vertex_usage_normal,vertex_usage_textcoord,vertex_usage_blendweight,vertex_usage_blendindices,vertex_usage_depth,vertex_usage_tangent,vertex_usage_binormal,vertex_usage_fog,vertex_usage_sample" />
  <meta name="search-keywords" content="vertex_format_add_custom,vertex_type_float1,vertex_type_float2,vertex_type_float3,vertex_type_float4,vertex_type_colour,vertex_type_ubyte4,vertex_usage_position,vertex_usage_colour,vertex_usage_normal,vertex_usage_textcoord,vertex_usage_blendweight,vertex_usage_blendindices,vertex_usage_depth,vertex_usage_tangent,vertex_usage_binormal,vertex_usage_fog,vertex_usage_sample" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>vertex_format_add_custom</h1>
  <p>Ta funkcja umożliwia użycie niestandardowego typu danych dla określonych atrybutów formatu <span class="notranslate">vertex</span> w ramach tworzonego nowego formatu <span class="notranslate">vertex</span>. Dostępne wartości, które można wykorzystać, są określone przez wybraną stałą typu danych, wymienioną poniżej:</p>
  <table>
    <colgroup>
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Draw_Vertex_Data_Type"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Drawing/Primitives/vertex_format_add_custom.htm">Stała typu danych wierzchołka</a></span></th>
      </tr>
      <tr>
        <th>Stała</th>
        <th>Opis</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_type_float1</span></td>
        <td>Pojedyncza wartość zmiennoprzecinkowa</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_type_float2</span></td>
        <td>Dwie wartości zmiennoprzecinkowe</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_type_float3</span></td>
        <td>Trzy wartości zmiennoprzecinkowe</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_type_float4</span></td>
        <td>Cztery wartości zmiennoprzecinkowe</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_type_colour</span></td>
        <td>Cztery wartości składowe (r, g, b, a)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_type_ubyte4</span></td>
        <td>Czteroskładnikowe, niepodpisane wartości bajtowe (od 0 do 255)</td>
      </tr>
    </tbody>
  </table>
  <p><br>
    Należy również określić sposób wykorzystania tych stałych, aby można było odpowiednio &quot;powiązać&quot; wartości w tworzonej witrynie <span class="notranslate">shader</span>. Jest to konieczne ze względu na fakt, że DX i OpenGL mają różne wymagania, więc jeśli nie zwiążesz ich prawidłowo, nie będą one prawidłowo wyświetlane na stronie <span class="notranslate">shader</span>. Dostępne stałe użytkowe, które możesz wybrać, są wymienione poniżej, a te, których użyjesz, będą zależały od specyfiki tworzonej strony <span class="notranslate">shader</span>:</p>
  <table>
    <colgroup>
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Draw_Vertex_Usage"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Drawing/Primitives/vertex_format_add_custom.htm">Typ wykorzystania wierzchołków Stała</a></span></th>
      </tr>
      <tr>
        <th>Stała</th>
        <th>Opis</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_position</span></td>
        <td>wartości położenia (x, y, z)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_colour</span></td>
        <td>wartości kolorów (r, g, b, a)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_normal</span></td>
        <td>wartości normalne wierzchołków (nx, ny, nz)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_textcoord</span></td>
        <td>Współrzędne UV (u, v)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_blendweight</span></td>
        <td>blendweight macierzy wejściowej (np. dla animacji szkieletowej)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_blendindices</span></td>
        <td>indeksy macierzy, które mają być używane (np. do animacji szkieletowej)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_depth</span></td>
        <td>Głębokość wierzchołka <span class="notranslate">buffer</span> wartość</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_tangent</span></td>
        <td>wartości stycznych</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_binormal</span></td>
        <td>wartości binormalne</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_fog</span></td>
        <td>wartości mgły</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">vertex_usage_sample</span></td>
        <td>indeks samplera</td>
      </tr>
    </tbody>
  </table>
  <p><br>
    Przy korzystaniu z takich niestandardowych formatów należy pamiętać o kilku ważnych rzeczach:</p>
  <ul class="colour">
    <li>Funkcja <span class="inline">vertex_format_add_custom()</span> obsługuje tylko <span class="inline">vertex_usage_position</span>, <span class="inline">vertex_usage_colour</span>, <span class="inline">vertex_usage_normal</span> i <span class="inline">vertex_usage_textcoord</span> przy użyciu GLSL <span class="notranslate">shaders</span>. Będą one mapowane odpowiednio na atrybuty <span class="notranslate">shader</span> <span class="inline">in_Position</span> , <span class="inline">in_Colour[0 - ...]</span>, <span class="inline">in_Normal</span> (wszystko, co nie jest jednym z tych trzech atrybutów - np. współrzędne <span class="notranslate">texture</span> - może być mapowane na dowolny atrybut zdefiniowany przez użytkownika).</li>
    <li>Generalnie, jeśli to możliwe, powinieneś używać <span class="inline">vertex_usage_textcoord</span> dla wszystkich dodatkowych parametrów, ponieważ typy takie jak <span class="inline">vertex_usage_blendweight</span> i <span class="inline">vertex_usage_tangent</span> są prawie przestarzałe w większości języków <span class="notranslate">shader</span> i prawdopodobnie nie będą poprawnie konwertowane. Zamiast tego należy używać <span class="inline">vec</span>, <span class="inline">vec2</span>, <span class="inline">vec3</span> lub <span class="inline">vec4</span>, <span class="inline">vertex_usage_textcoord</span>, a wszystko powinno działać poprawnie.</li>
    <li>GLSL ES <i>nie</i> obsługuje atrybutów całkowitych, więc przekazywanie współrzędnych <span class="inline">ivec4</span> nie działa (ten typ jest zwykle używany przy przekazywaniu współrzędnych <span class="inline">vertex_usage_blendindices</span>). Musisz przekazać współrzędne <span class="notranslate">texture</span>, a następnie w <span class="notranslate">shader</span> przekonwertować je na <span class="inline">ivec4</span> w następujący sposób:</li>
  </ul>
  <p> </p>
  <p class="code">attribute vec3 in_Position;<br />
    attribute vec4 in_BlendIndices;<br />
    attribute vec4 in_BlendWeights;<br />
    <br />
    varying vec4 v_vColour;<br />
    varying mat4 v_mat;<br />
    <br />
    void main()<br />
    {<br />
        gl_Position = gm_Matrices[MATRIX_WORLD_VIEW_PROJECTION] * vec4( in_Position.xyz, 1.0);<br />
        v_vColour = in_BlendWeights;<br />
         ivec4 t = ivec4(in_BlendIndices);<br />
         v_mat = gm_Matrices[ t.x ];<br />
    }
  </p>
  <ul class="colour">
    <li>Wagi mieszanek są zwykle przechowywane w tablicy, a dostęp do nich uzyskuje się za pomocą indeksów mieszanek, ale tutaj widać, że zamiast definiować <span class="inline">in_BlendIndices</span> jako atrybut <span class="inline">ivec4</span>, jest to atrybut <span class="inline">vec4</span>, który w kodzie jest zamieniany na <span class="inline">ivec4</span>. Jest on następnie używany do indeksowania tablicy utworzonej przy użyciu <span class="inline">gm_Matrix</span> (dostęp do tablicy można uzyskać tylko przy użyciu wartości <span class="inline">INT</span> - nie float).</li>
    <br />
     
  </ul>
  <h4>Składnia:</h4>
  <p class="code">vertex_format_add_custom(type, usage);</p>
  <table>
    <tbody>
      <tr>
        <th>Argument</th>
        <th>Typ</th>
        <th>Opis</th>
      </tr>
      <tr>
        <td><span class="notranslate">type</span></td>
        <td><span data-keyref="Type_Constant_Draw_Vertex_Data_Type"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Drawing/Primitives/vertex_format_add_custom.htm">Stała typu danych wierzchołka</a></span></td>
        <td><span class="notranslate">The data type that this custom vertex data will hold (see the <b><i>type constants</i></b> listed above).</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">usage</span></td>
        <td><span data-keyref="Type_Constant_Draw_Vertex_Usage"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Drawing/Primitives/vertex_format_add_custom.htm">Typ wykorzystania wierzchołków Stała</a></span></td>
        <td><span class="notranslate">The use that the data will get(see the <b><i>usage constants</i></b> listed above).</span></td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Zwroty:</h4>
  <p class="code"><span data-keyref="Type_Void"><a data-rhwidget="HyperlinkPopover" href="../../../../../LINKGOESHERE">N/A</a></span></p>
  <p> </p>
  <h4>Przykład:</h4>
  <p class="code">vertex_format_begin();<br />
    vertex_format_add_textcoord();<br />
    vertex_format_add_custom(vertex_type_float3, vertex_usage_position);<br />
    my_format = vertex_format_end();</p>
  <p>Powyższy kod utworzy nowy format <span class="notranslate">vertex</span> zawierający tylko <span class="notranslate">texture</span> i 3 niestandardowe wartości zmiennoprzecinkowe dla pozycji. Następnie zapisuje identyfikator formatu w zmiennej &quot;my_format&quot;.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Powrót: <a href="Primitives_And_Vertex_Formats.htm">Prymitywy i <span class="notranslate">Vertex</span> Formaty</a></div>
        <div style="float:right">Następny: <a href="vertex_format_end.htm"><span class="notranslate">vertex_format_end</span></a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Wszystkie prawa zastrzeżone.</span></h5>
  </div>
  <!-- KEYWORDS
vertex_format_add_custom
vertex_type_float1
vertex_type_float2
vertex_type_float3
vertex_type_float4
vertex_type_colour
vertex_type_ubyte4
vertex_usage_position
vertex_usage_colour
vertex_usage_normal
vertex_usage_textcoord
vertex_usage_blendweight
vertex_usage_blendindices
vertex_usage_depth
vertex_usage_tangent
vertex_usage_binormal
vertex_usage_fog
vertex_usage_sample
-->
  <!-- TAGS
vertex_format_add_custom
-->
</body>
</html>